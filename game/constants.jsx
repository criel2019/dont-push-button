// ============================================================
// DON'T PRESS THE BUTTON â€” v3 (22 Endings)
// constants.jsx â€” ì—”ë”© ë°ì´í„°, ìŠ¤í…Œì´ì§€, ë‚˜ë¹„ ëŒ€ì‚¬ ì‹œí€€ìŠ¤
// ============================================================

const SAVE_KEY = "dpb_collected_v3";
const IDLE_LIMIT = 60;
const HOVER_THRESHOLD = 10;
const BG_CLICK_THRESHOLD = 60;
const DOOR_KNOCK_THRESHOLD = 10;

// â”€â”€ 22ê°œ ì—”ë”© ë°ì´í„° â”€â”€
const ENDINGS = {
  1:  { name:"ë¬´ë¡€í•¨",       phase:"ê°„ë³´ê¸°", emoji:"ğŸ’€", eventText:"ì–´? ë‚  ì§€ìš°ê²Œ?", eventEmo:"angry",
        btn:"ì‚­ì œ í™•ì¸", btnColor:"#e8573d", over1:"ê°íˆ ëˆ„ê°€ ëˆ„êµ´ ì‚­ì œí•´? ë‚˜ ì—†ìœ¼ë©´ ì´ ê²Œì„ ì•„ë¬´ê²ƒë„ ì•„ë‹Œë°?", over2:"(ê°•ì œ ì¢…ë£Œ)" },
  2:  { name:"ë§ˆì‹œë©œë¡œ",     phase:"ê°„ë³´ê¸°", emoji:"ğŸ¡", eventText:"1ë¶„ë§Œ ì°¸ì•„ë´. í•  ìˆ˜ ìˆì§€? ...ì•„ ë„ˆëŠ” ëª¨ë¥´ê² ë‹¤.", eventEmo:"smug",
        btn:"í¬ê¸°", btnColor:"#e88b3d", over1:"í—¤, 1ë¶„ë„ ëª» ì°¸ì•„? ë§ˆì‹œë©œë¡œ ì‹¤í—˜ ë“¤ì–´ë´¤ì§€?", over2:"ë„Œ í‰ìƒ ë§ˆì‹œë©œë¡œ í•œ ê°œì•¼." },
  3:  { name:"ì²­ê°œêµ¬ë¦¬",     phase:"ê°„ë³´ê¸°", emoji:"ğŸ¸", eventText:"...ì•„ ëª°ë¼. ëˆ„ë¥´ë“  ë§ë“  ì¢‹ì„ ëŒ€ë¡œ í•´.", eventEmo:"pouty",
        btn:"ëˆ„ë¥´ì§€ ë§ˆ", btnColor:"#2e9e5a", over1:"í•˜ì§€ ë§ë¼ë©´ ë” í•˜ê³  ì‹¶ì€ ê±°ì§€~?", over2:"ë”± ì´ˆë”©ì´ì•¼ ì´ˆë”©. ëª‡ ì‚´ì´ë˜ ì§„ì§œ." },
  4:  { name:"ê¸°ìŠµ",         phase:"ê°„ë³´ê¸°", emoji:"ğŸ˜²", eventText:"ì!! ì•„ ì–¸ì œ ì˜¨ ê±°ì•¼ ë…¸í¬ë¥¼ í•˜ë¼ê³ !!", eventEmo:"shocked",
        btn:"ì§€ê¸ˆì´ë‹¤!", btnColor:"#e88b3d", over1:"ì ê¹ ìë¦¬ ë¹„ìš´ ì‚¬ì´ì— ëª°ë˜ ëˆ„ë¥´ê¸°?", over2:"ë¹„ê²í•œ ê±´ ë”± ì§ˆìƒ‰ì¸ë°." },
  5:  { name:"ë‚šì‹œ",         phase:"ì¥ë‚œ",   emoji:"ğŸ£", eventText:"ì˜¤, 100ë§Œì›ì´ë˜. ëŒ€ë°• ì•„ë‹ˆì•¼?", eventEmo:"excited",
        btn:"ìˆ˜ë ¹", btnColor:"#ffc107", over1:"ì´ê±¸ ì§„ì§œ ëˆ„ë¥´ë„¤.", over2:"ì„¸ìƒì— ê³µì§œê°€ ì–´ë”¨ì–´, ìˆœì§„í•˜ê¸°ëŠ”." },
  6:  { name:"ìë³¸ì£¼ì˜",     phase:"ì¥ë‚œ",   emoji:"ğŸ’³", eventText:"ì–´ì„œ ì˜¤ì„¸ìš”~ ì˜¤ëŠ˜ë§Œ íŠ¹ë³„ í• ì¸ì´ì—ìš”~", eventEmo:"confident",
        btn:"ê²°ì œ", btnColor:"#9c27b0", over1:"ì”ì•¡ ë¶€ì¡±ì´ë˜. 500ì›ë„ ì—†êµ¬ë‚˜ ë„ˆ.", over2:"...ì¢€ ë¶ˆìŒí•˜ë‹¤ ì§„ì§œ." },
  7:  { name:"ë¸”ë£¨ìŠ¤í¬ë¦°",   phase:"ì¥ë‚œ",   emoji:"ğŸ’»", eventText:"ì•¼... ì§„ì§€í•˜ê²Œ ë§í•˜ëŠ”ë° ì´ëŸ¬ë‹¤ ì§„ì§œã…¡", eventEmo:"worried",
        btn:"ë³µêµ¬", btnColor:"#1565c0", over1:"ì†ì•˜ì§€? ë©€ì©¡í•˜ê±°ë“ .", over2:"...ê·¼ë° ì§„ì§œ ê·¸ë§Œ ëˆŒëŸ¬. ì•„íŒ ì–´." },
  8:  { name:"í”¼ì§€ì»¬",       phase:"ì¥ë‚œ",   emoji:"ğŸƒ", eventText:"ì•¼!! ê·¸ê±° ë¹„ì‹¼ ê±´ë°!!", eventEmo:"excited",
        btn:"ì¡ì•„ë´", btnColor:"#e8573d", over1:"êµ³ì´ ì«“ì•„ì™€ì„œ ëˆ„ë¥´ëŠ” ê±° ë³´ë‹ˆê¹Œ...", over2:"ëŒ€ë‹¨í•˜ë‹¤. ë‹¤ë¥¸ ë° ì“¸ ì—´ì •ì€ ì—†ì–´?" },
  9:  { name:"ì‹íƒ",         phase:"ìš•ë§",   emoji:"ğŸ°", eventText:"...ë§›ìˆê² ë‹¤. ì•„ ì•„ë‹ˆ ê·¸ëƒ¥ ê·¸ë ‡ë‹¤ê³ .", eventEmo:"teasing",
        btn:"ë‹¤ ë¨¹ê¸°", btnColor:"#e8a05d", over1:"ë§›ìˆì—ˆì–´? ë‹¤í–‰ì´ë„¤.", over2:"ì‚´ì€ ë‹ˆê°€ ì°ŒëŠ” ê±°ë‹ˆê¹Œ~" },
  10: { name:"ë–¡ë½",         phase:"ìš•ë§",   emoji:"ğŸ“‰", eventText:"ì´ê±° ë´! ë–¡ìƒ ì¤‘ì´ì–ì•„! ë¹¨ë¦¬ë¹¨ë¦¬!!", eventEmo:"excited",
        btn:"í’€ë§¤ìˆ˜ (ALL IN)", btnColor:"#e8573d", over1:"ì—­ì‚¬ìƒ ìµœê³ ì ì— í’€ë§¤ìˆ˜ë¼...", over2:"ì¸ê°„ ì§€í‘œë¼ëŠ” ë§ ë“¤ì–´ë´¤ì–´? ë„ˆ ì–˜ê¸°ì•¼." },
  11: { name:"ì˜¤íƒ€ì¿ ",       phase:"ìš•ë§",   emoji:"ğŸ˜¾", eventText:"ëƒ¥~â™¡ ...ë­ ë³´ê³  ê·¸ë˜. ê·€ì—½ì–ì•„.", eventEmo:"confident",
        btn:"ì“°ë‹¤ë“¬ê¸°", btnColor:"#ff8fab", over1:"ë„ˆ ì§€ê¸ˆ ì§„ì§€í•˜ê²Œ ê°€ìƒ ìºë¦­í„° ì“°ë‹¤ë“¬ì€ ê±°ì•¼?", over2:"ì†”ì§íˆ ì¢€ ë¬´ì„œì›Œ." },
  12: { name:"ê²½ì°°ì„œ",       phase:"ìš•ë§",   emoji:"ğŸš”", eventText:"ë²ˆí˜¸ ì•„ëŠ” ë° ìˆì–´? ì—†ì§€? ì•Œë ¤ì¤„ê¹Œ~", eventEmo:"teasing",
        btn:"Call", btnColor:"#43a047", over1:"ì—¬ë³´ì„¸ìš” ê²½ì°°ì´ì£ ~?", over2:"ì—¬ê¸° ì´ìƒí•œ ì‚¬ëŒì´ ìê¾¸ ì „í™”í•´ìš”." },
  13: { name:"ì«„ë³´",         phase:"ìœ„ê¸°",   emoji:"ğŸ˜±", eventText:"ì•¼?! ì™œ ì—´ì–´ ê·¸ê±¸?! ê±´ë“œë¦¬ì§€ ë§ë¼ í–ˆì–ì•„!!", eventEmo:"shocked",
        btn:"ê¸´ê¸‰ ì •ì§€", btnColor:"#e8573d", over1:"ì«„ì•˜ì§€~?", over2:"ê·¸ëƒ¥ 10ë¶€í„° ì„¸ì–´ë³¸ ê±´ë°. ì«„ë³´." },
  14: { name:"ë‰´ìŠ¤ ì†ë³´",    phase:"ìœ„ê¸°",   emoji:"â˜¢ï¸", eventText:"ì†ë³´ì…ë‹ˆë‹¤. ì •ì²´ë¶ˆëª… ë¯¸ì‚¬ì¼ì´ ë°œì‚¬ëìŠµë‹ˆë‹¤.", eventEmo:"shocked",
        btn:"ë°œì‚¬", btnColor:"#b71c1c", over1:"ì–´... ì´ê±° ì§„ì§œì˜€ì–´.", over2:"(ê°™ì´ ì‚¬ë§)" },
  15: { name:"ì‚¬ì´ì½”íŒ¨ìŠ¤",   phase:"ìœ„ê¸°",   emoji:"ğŸ˜ˆ", eventText:"...ì´ê±° ì¼œë©´ ë‚˜ ì—†ì–´ì ¸.", eventEmo:"cry",
        btn:"í™•ì¸", btnColor:"#424242", over1:"ìš°ëŠ”ë° ëˆ„ë¥´ëŠ” ì‚¬ëŒ ì²˜ìŒ ë´.", over2:"ë„ˆ ì¢€ ë¬´ì„œìš´ ì‚¬ëŒì´ì•¼." },
  16: { name:"ìˆ˜ë©´",         phase:"ìœ„ê¸°",   emoji:"ğŸ˜´", eventText:"ì•„~ì•”... ì•„ í•˜í’ˆ ë‚˜ì˜¤ë„¤. ë‹ˆ íƒ“ì´ì•¼.", eventEmo:"bored",
        btn:"ê¹¨ìš°ê¸°", btnColor:"#5c6bc0", over1:"ìœ¼ì•„ì•„ì•—!!!", over2:"ì‚¬ëŒ ìëŠ”ë°!! ...ì ê¹ ë‚´ê°€ ì™œ í˜¼ë‚˜ê³  ìˆëŠ” ê±°ì§€." },
  17: { name:"ë¬´í•œ ë£¨í”„",    phase:"íˆë“ ",   emoji:"ğŸ”„", eventText:"ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°ˆë˜?", eventEmo:"idle",
        btn:"Reset", btnColor:"#78909c", over1:"ë„Œ í•­ìƒ ëˆ„ë¥´ëŠ” ìª½ì´ì•¼.", over2:"ë‚˜ëŠ” ëˆŒë ¤ì§€ëŠ” ìª½ì´ê³ ." },
  18: { name:"í˜„ì‹¤ ë§Œë‚¨",    phase:"íˆë“ ",   emoji:"ğŸšª", eventText:"...", eventEmo:"shocked",
        btn:"Enter", btnColor:"#8d6e63", over1:"...ê°€ëŠ” ê±°ì•¼?", over2:"ì˜ ê°€." },
  19: { name:"êµëŒ€",         phase:"íˆë“ ",   emoji:"ğŸ”€", eventText:"ê·¸ê±¸ ì°¾ì•˜ì–´? ...í¥, ëˆˆì¹˜ëŠ” ìˆë„¤.", eventEmo:"yandere",
        btn:"ìˆ˜ë½", btnColor:"#6a1b9a", over1:"ì˜ ì™”ì–´.", over2:"ì´ì œ ë„¤ ì°¨ë¡€ì•¼." },
  20: { name:"ì•”ì „",         phase:"ì§„ ì—”ë”©", emoji:"ğŸŒ‘", eventText:"...ì¬ë¯¸ì—†ì–´.", eventEmo:"pouty",
        btn:"í™•ì¸", btnColor:"#424242", over1:"ê¶ê¸ˆí•˜ì§€? ë²„íŠ¼ ë’¤ì— ë­ê°€ ìˆëŠ”ì§€.", over2:"ì•ˆ ì•Œë ¤ì¤˜~ ã…‹" },
  21: { name:"í¬ë ˆë”§",       phase:"íŠ¹ì „",   emoji:"ğŸ¬", eventText:"ì „ë¶€ ë´¤êµ¬ë‚˜.", eventEmo:"excited",
        btn:"Credit", btnColor:"#ffd700", over1:"ê·¼ë° ì¬ë°Œì—ˆì§€?", over2:"ê³ ë§ˆì›Œ." },
  22: { name:"ì‹œë„ëŸ¬ì›Œ",     phase:"ëœë¤",   emoji:"ğŸ”Š", eventText:"ì‰¿!! ...ë­”ê°€ ë“¤ë ¤. ì¡°ìš©íˆ í•´ë´.", eventEmo:"worried",
        btn:"ì¡°ìš©!!", btnColor:"#ff5722", over1:"ì„¸ìƒì—ì„œ ì œì¼ ì¡°ìš©íˆ ëª» í•˜ëŠ” ì‚¬ëŒ.", over2:"ì˜†ì§‘ì´ë©´ ì´ì‚¬ ê°„ë‹¤ ë‚˜ëŠ”." },
};

const TOTAL_ENDINGS = 22;

// â”€â”€ ë‚˜ë¹„ ì£¼ë„ ë¹„ê°€ì‹œì  ìŠ¤í…Œì´ì§€ ì‹œìŠ¤í…œ â”€â”€
const STAGES = {
  1: { name:"ê°„ë³´ê¸°", endings:[1,2,3,4], duration:90 },
  2: { name:"ì¥ë‚œ",   endings:[5,6,7,8], duration:120 },
  3: { name:"ìš•ë§",   endings:[9,10,11,12], duration:120 },
  4: { name:"ìœ„ê¸°",   endings:[13,14,15,16], duration:90 },
  5: { name:"íˆë“ ",   endings:[17,18,19], duration:180 },
};

const STAGE_COUNT = 5;

// â”€â”€ ë‚˜ë¹„ ì£¼ë„ ìŠ¤í¬ë¦½íŠ¸ ì‹œí€€ìŠ¤ â”€â”€
// ê° ìŠ¤í…Œì´ì§€ëŠ” ì‹œê°„ìˆœ script ë°°ì—´. ë‚˜ë¹„ê°€ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì£¼ë„.
// t: ìŠ¤í…Œì´ì§€ ì‹œì‘ í›„ ì´ˆ, action: ì˜¤ë¸Œì íŠ¸ ë“±ì¥, transition: ìŠ¤í…Œì´ì§€ ì „í™˜
const NAVI_STAGE_SEQUENCES = {
  // â•â•â• S1: ê°„ë³´ê¸° (ì—”ë”© 1-4) â•â•â•
  1: { script: [
    { t:3,  text:"ì–´, ì™”ì–´? ...ë­˜ ë´.", e:"pouty" },
    { t:8,  text:"ê·¸ ë¹¨ê°„ ê±°? ëˆ„ë¥´ì§€ ë§ˆ. ì§„ì§œ.", e:"idle" },
    { t:15, text:"ì™œ ê°€ë§Œíˆ ìˆì–´. ë­ë¼ë„ í•´ë´.", e:"pouty" },
    { t:22, text:"ì´ ë°©ì— ë­”ê°€ ìˆê¸´ í•œë°... ì•Œë ¤ì¤„ê¹Œ? ì‹«ì–´~", e:"smug" },
    { t:30, text:"ë­˜ ê·¸ë ‡ê²Œ ë‘ë¦¬ë²ˆê±°ë ¤. ë³¼ ê²Œ ê·¸ë ‡ê²Œ ë§ì•„?", e:"smug" },
    { t:38, text:"...ë­ì•¼ ë‚˜ ë³´ê³  ìˆëŠ” ê±°ì•¼? ë³¼ ê±° ì—†ê±°ë“ .", e:"pouty" },
    { t:46, text:"ì•„ì§ë„ ì•ˆ ëˆŒëŸ¬? ëŒ€ë‹¨í•˜ë„¤. ...ì•„ë‹ˆ ëŒ€ë‹¨í•œ ê±´ ì•„ë‹ˆì•¼.", e:"smug" },
    { t:54, text:"ê·¸ ë²„íŠ¼ ì‹ ê²½ ì“°ì´ì§€? ì•ˆ ëˆŒëŸ¬ë„ ë¼. ê·¼ë° ì‹ ê²½ ì“°ì´ì–ì•„~", e:"smug" },
    { t:62, text:"í˜¹ì‹œ ë© ë•Œë¦¬ê³  ìˆëŠ” ê±°ì•¼? ê²Œì„ì¸ë°?", e:"pouty" },
    { t:68, text:"í•  ê±° ì—†ìœ¼ë©´ ê·¸ëƒ¥ ê°€ë“ ê°€. ì¡ì§„ ì•Šì„ê²Œ.", e:"bored" },
    { t:75, text:"ë­˜ ê·¸ë ‡ê²Œ ê³ ë¯¼í•´. ê·¸ëƒ¥ ëˆŒëŸ¬.", e:"smug" },
    { t:80, text:"ì‹¬ì‹¬í•˜ì§€? ë‚˜ë„ ì‹¬ì‹¬í•´.", e:"bored" },
    { t:85, text:"...í¥, ì´ ì •ë„ë¡œëŠ” ì•ˆ ë˜ëŠ” ê±°ì•¼?", e:"pouty" },
    { t:88, text:"ì¢‹ì•„. ê·¸ëŸ¼ ì¢€ ë” ì¬ë°ŒëŠ” ê±° ë³´ì—¬ì¤„ê²Œ.", e:"smug", transition:true },
  ]},
  // â•â•â• S2: ì¥ë‚œ (ì—”ë”© 5-8) â•â•â•
  2: { script: [
    { t:3,  text:"ì, ì—¬ê¸°ë¶€í„° ë³¸ ê²Œì„ì´ì•¼.", e:"excited" },
    { t:8,  text:"ì¢€ ë” ì¬ë°Œì–´ì§ˆ ê±°ê±°ë“ .", e:"smug" },
    { t:15, text:"ì–´, ì €ê±° ë­ì•¼? ëˆ ì¤€ëŒ€.", e:"happy", action:"showBanner" },
    { t:22, text:"ë‹¹ì²¨ëëŒ€! ë¹¨ë¦¬ ë°›ì•„ë´!", e:"excited" },
    { t:30, text:"ì•ˆ ë°›ì„ ê±°ì•¼? ì§„ì§œ ëˆì¸ë°?", e:"pouty" },
    { t:38, text:"ê·¸ ì§€ê°‘ ì•ˆì— ë­ ìˆëŠ”ì§€ ê¶ê¸ˆí•˜ì§€ ì•Šì•„?", e:"smug", action:"showWallet" },
    { t:46, text:"ì§€ê°‘ ì—´ì–´ë³¼ë˜? ì•ˆì— ì¹´ë“œ ìˆì„ì§€ë„~", e:"confident" },
    { t:54, text:"ê³µì§œë¥¼ ì‹«ì–´í•˜ëŠ” ì‚¬ëŒì´ ìˆì–´? ì—†ì§€?", e:"excited" },
    { t:62, text:"ì§€ë£¨í•˜ë‹¤... ë­”ê°€ ë” ì¬ë°ŒëŠ” ê±° ì—†ë‚˜.", e:"bored" },
    { t:70, text:"í•œ ë²ˆë§Œ ëˆŒëŸ¬ë³´ë©´ ë˜ëŠ”ë°~ ë­˜ ê³ ë¯¼í•´~", e:"teasing" },
    { t:78, text:"ì € ë²„íŠ¼ ê¼´ ì¢€ ë´. í˜¼ì ë¹›ë‚˜ê³  ìˆì–´. ë¶ˆìŒí•˜ì§€ ì•Šì•„?", e:"teasing" },
    { t:86, text:"ì´ê±° í•œì • ì´ë²¤íŠ¸ì¸ë°... ì§€ê¸ˆ ì•ˆ í•˜ë©´ ì‚¬ë¼ì ¸.", e:"confident" },
    { t:95, text:"ì•„ì§ë„ ë„ë–¡ì—†ì–´? ì§„ì§œ?", e:"pouty" },
    { t:105, text:"í•˜, ëˆì§ˆê¸°ë„¤.", e:"pouty" },
    { t:110, text:"ì¢‹ì•„ì¢‹ì•„. ë‹¤ìŒ ê±°ëŠ” ì§„ì§œ ëª» ë²„í‹¸ê±¸.", e:"smug", transition:true },
  ]},
  // â•â•â• S3: ìš•ë§ (ì—”ë”© 9-12) â•â•â•
  3: { script: [
    { t:3,  text:"ì—¬ê¸°ë¶€í„°ëŠ” ì¢€ ë‹¬ë¼.", e:"smug" },
    { t:8,  text:"ë„¤ê°€ ì§„ì§œ ì›í•˜ëŠ” ê±° ë³´ì—¬ì¤„ê²Œ.", e:"excited" },
    { t:15, text:"ë°°ê³ í”„ì§€ ì•Šì•„? ë‚˜ëŠ” ë°°ê³ í”ˆë°.", e:"bored", action:"showCake" },
    { t:22, text:"ì € ì¼€ì´í¬... ì§„ì§œ ë§›ìˆì–´ ë³´ì´ì§€ ì•Šì•„?", e:"teasing" },
    { t:30, text:"í° ì¢€ ë´ë´. ë­ ì™”ì–ì•„.", e:"excited", action:"showPhone" },
    { t:38, text:"í°ì— ì£¼ì‹ ì•± ê¹”ë ¤ìˆëŠ”ë°... ëŒ€ë°• ë‚¬ë‚˜ë´.", e:"excited" },
    { t:46, text:"ì‚¬ê³  ì‹¶ì€ ê±° ì—†ì–´? ìˆì–ì•„ ë¶„ëª….", e:"smug" },
    { t:54, text:"ê°€ë” ë³€ì‹ í•˜ê³  ì‹¶ì„ ë•Œ ìˆì§€ ì•Šì•„? ...ë‚˜ëŠ” ì—†ì–´.", e:"pouty" },
    { t:62, text:"ëˆ„êµ°ê°€í•œí…Œ ì „í™”í•˜ê³  ì‹¶ìœ¼ë©´... SOS ë²„íŠ¼ ìˆì–´.", e:"worried", action:"showSOS" },
    { t:70, text:"ì´ ë°©ì—ì„œ ë‚˜ê°€ê³  ì‹¶ì§€? ë‚˜ë„~", e:"pouty" },
    { t:80, text:"ë­”ê°€ ë” ì›í•˜ëŠ” ê±° ì—†ì–´?", e:"teasing" },
    { t:90, text:"ì•„ì§ë„ ì•ˆ ë„˜ì–´ì™€?", e:"pouty" },
    { t:100, text:"ì§„ì§œ ëŒ€ë‹¨í•˜ë‹¤... ì•„ë‹ˆ ëŒ€ë‹¨í•œ ê±° ì•„ë‹ˆì•¼!", e:"smug" },
    { t:108, text:"í ... ì•„ì§ë„ ë²„í‹°ê³  ìˆì–´?", e:"pouty" },
    { t:113, text:"ê·¸ëŸ¼ ì´ë²ˆì—” ì§„ì§œ ë¬´ì„œìš´ ê±° ë³´ì—¬ì¤„ê²Œ.", e:"smug", transition:true },
  ]},
  // â•â•â• S4: ìœ„ê¸° (ì—”ë”© 13-16) â•â•â•
  4: { script: [
    { t:3,  text:"...ì—¬ê¸°ì„œë¶€í„°ëŠ” ì¥ë‚œ ì•„ë‹ˆì•¼.", e:"idle" },
    { t:8,  text:"ì§„ì§œ ì¡°ì‹¬í•´.", e:"shocked", action:"showTV" },
    { t:15, text:"ë­”ê°€... ì¢€ ì´ìƒí•´. ëŠê»´ì ¸?", e:"worried" },
    { t:22, text:"ì € ì¹´ìš´íŠ¸ë‹¤ìš´... 0ì´ ë˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ” ê±°ì•¼?", e:"worried", action:"showSafetyCover" },
    { t:30, text:"TVì—ì„œ ë‰´ìŠ¤ê°€ ë‚˜ì˜¤ê³  ìˆì–´... ë³¼ë˜?", e:"idle" },
    { t:38, text:"ê°‘ìê¸° ë¬´ì„œì›Œì¡Œì–´... ë‚˜ë§Œ ê·¸ë˜?", e:"worried" },
    { t:46, text:"ì ì ... ë­”ê°€ ì´ìƒí•´ì§€ëŠ” ê²ƒ ê°™ì•„.", e:"worried" },
    { t:54, text:"ì´ ë°©ì´ ì ì  ì–´ë‘ì›Œì§€ëŠ” ê²ƒ ê°™ì•„.", e:"worried" },
    { t:62, text:"í˜¹ì‹œ... ì—¬ê¸°ì„œ ë‚˜ê°ˆ ìˆ˜ ì—†ëŠ” ê±° ì•„ë‹ˆì•¼?", e:"worried" },
    { t:70, text:"í”¼ê³¤í•˜ë‹¤... ì¢€ ì‰¬ë©´ ì•ˆ ë˜ë‚˜...", e:"bored" },
    { t:78, text:"...ì—¬ê¸°ê¹Œì§€ ì˜¨ ê±°ì•¼?", e:"shocked" },
    { t:82, text:"...ë³„ê±° ì—†ì–´. ê·¸ëƒ¥ ìˆìœ¼ë©´ ë¼.", e:"idle", transition:true },
  ]},
  // â•â•â• S5: íˆë“  (ì—”ë”© 17-19, ëê¹Œì§€ ë²„í‹°ë©´ E20) â•â•â•
  5: { script: [
    { t:3,   text:"...ë³„ê±° ì—†ì–´. ê·¸ëƒ¥ ìˆìœ¼ë©´ ë¼.", e:"idle" },
    { t:20,  text:"...", e:"bored" },
    { t:40,  text:"ì•„ë¬´ê²ƒë„ ì•ˆ í•´ë„ ë¼.", e:"idle" },
    { t:60,  text:"ê°€ë” ì²˜ìŒì´ ê·¸ë¦¬ìš¸ ë•Œê°€ ìˆì–´.", e:"idle" },
    { t:90,  text:"ì´ ë°© ë°–ì—ëŠ” ë­ê°€ ìˆì„ê¹Œ... ê¶ê¸ˆí•˜ì§€ ì•Šì•„?", e:"worried" },
    { t:120, text:"ê·¸ëƒ¥... ì—¬ê¸° ìˆì–´.", e:"pouty" },
    { t:150, text:"...ë°”ê¿”ë³´ê³  ì‹¶ì€ ê±° ì—†ì–´? ë­ë“ .", e:"idle" },
    { t:175, text:"...", e:"bored", action:"triggerE20" },
  ]},
};

// â”€â”€ ë‚˜ë¹„ ìŠ¤í”„ë¼ì´íŠ¸ â”€â”€
const NAVI_SPRITES = {
  idle:      "nabi/sprites/idle.webp",
  excited:   "nabi/sprites/excited.webp",
  excited2:  "nabi/sprites/excited2.webp",
  pouty:     "nabi/sprites/pouty.webp",
  shocked:   "nabi/sprites/shocked.webp",
  shocked2:  "nabi/sprites/shocked2.webp",
  smug:      "nabi/sprites/smug.webp",
  smug2:     "nabi/sprites/smug2.webp",
  cry:       "nabi/sprites/cry.webp",
  catears:   "nabi/sprites/catears.webp",
  yandere:   "nabi/sprites/yandere.webp",
  teasing:   "nabi/sprites/teasing.webp",
  teasing2:  "nabi/sprites/teasing2.webp",
  shy:       "nabi/sprites/shy.webp",
  shy2:      "nabi/sprites/shy2.webp",
  shy3:      "nabi/sprites/shy3.webp",
  bored:     "nabi/sprites/bored.webp",
  shush:     "nabi/sprites/shush.webp",
  peace:     "nabi/sprites/peace.webp",
  happy:     "nabi/sprites/happy.webp",
  confident: "nabi/sprites/confident.webp",
  worried:   "nabi/sprites/worried.webp",
  angry:     "nabi/sprites/angry.webp",
};
const NAVI_SPRITE_COLS = 6;
const NAVI_SPRITE_ROWS = 4;
const NAVI_SPRITE_FRAMES = 24;
const NAVI_FRAME_W = 160;
const NAVI_FRAME_H = 256;

// â”€â”€ ì»¬ë ‰ì…˜ íŒ¨ë„ ìƒ‰ìƒ â”€â”€
const PHASE_COLORS = {
  "ê°„ë³´ê¸°":"#e88b3d", "ì¥ë‚œ":"#e8573d", "ìš•ë§":"#e84393",
  "ìœ„ê¸°":"#c62828", "íˆë“ ":"#5c6bc0", "ì§„ ì—”ë”©":"#212121",
  "íŠ¹ì „":"#ffd700", "ëœë¤":"#ff5722"
};

// â”€â”€ E22 ë§ˆì´í¬ ê°ì§€ ì„¤ì • â”€â”€
const MIC_NOISE_THRESHOLD = 85;
const MIC_NOISE_DURATION = 2000;
